commentMap = ["Thank you so much for all the patience and great guidance during my driving lessons. You made driving fun and easy to learn, and all the tips and tricks you gave me were very helpful. From the first lesson I knew you had every students' best interest and you made every minute count. Now I have more confidence on the road, all thanks to you. <br /><br />Regards, Olivia ",
  "The Canadian Driving Academy has some of the best instruction in the Kitchener-Waterloo region. Not only did they help me learn driving regulations, feel comfortable behind the wheel, as well as learn the easiest strategies for safe driving, they are also very professional in their education. I never felt uncomfortable or unsafe when in the car with Ricky and he helped me pass my G2 exam with flying colours. Furthermore, after I bad accident, Ricky really helped me overcome my driving phobia and regain confidence behind the wheel so that I could pass my G test. Thank you so much for everything you have done for me CDA! You'll never know how much I appreciate the amount of time and effort you put in to help me overcome my fears and become and safe and courageous driver! <br /><br />PAM ",
  "When I was looking for a local driving school in Waterloo I chose Canadian Driving Academy because of the reviews available online. And I wasn't disappointed. My instructor Ashok was extremely professional,punctual and honest. I thought I needed 5 lessons but right of the bat he said I did not need more than 3. Unlike other schools he did not try to peddle any classes or anything extra. I passed my G2 in first attempt after just two sessions with Ashok. He doesn't teach you gimmicks to impress the examiner but simple safe driving tips which help you pass the test in the right way. I would recommend this school to anyone who's looking for a reliable and professional driving school in the area. <br /><br />Dipti ",
  "Hello Ricky, I just wish to thank you for all your hard work and patience with me while learning everything that I need to know on the roads. I am very pleased of the outcome and I am so proud to say that I passed my G2 last year and G licenses this year in 1 take all because of your expertise in terms of the rules of the road. I would have not done it the first time if not for your help. This is the reason why I highly recommend you to all my friends who needed help in driving. I am a first time driver when I got here in Canada and I couldn't believe that I can drive and pass G2 and G road tests right away in first try. Thank you again Ricky and more power to Canadian Driving Academy! You guys are the best! ",
  "Hi Ashok <br /><br />I am really happy I made the right decision to contact you. You provided excellent service. It's just because of your useful tips that I cleared my G test with flying colour. I will definitely recommend C.D.A driving school to everyone. Keep up the good work. All the best. Thanks once again Ashok and C.D.A. driving school. Reshma",
  "Dear Canadian Driving Academy, <br /><br />I passed my G license test on the first try with only one lesson. Ashok Sharma has experience, tells you exactly what you need to know (no more, no less) and has those extra tips that come from knowing his local test center well. He's a straight talker and funny to boot. It was money well spent and a pleasure to meet him. <br /><br />Thanks for your help Ashok ",
  "Hi Ricky, <br /><br />Both my in-class and in-car lessons at Canadian Driving Academy were great. It is clear that both Ricky and Ashok are passionate in what you do.Thanks to my incar insturctor Ricky I learned a lot about how to be a safe driver on the road and I feel much more comfortable driving now. Because of Rick's teaching i pass my G2 in first time. Thank you so much Ricky! <br /><br />Ingra ",
  "Hello, <br /><br />I wanted to write this testimonial so that perhaps I could be helpful and encourage others in learning to drive.I am a sixty-two year old lady and have always avoided even thinking about getting my license!!Then came a time in my life that I needed to drive in order to stay with my present employer.I decided to ask the Canadian Driving Academy for help with this challenge.The CDA came with a referral from other family members whom had also used their services.I attended the required in-class course and found the course instructors most helpful, being friendly & welcoming.My driving instructor Ashok, took a great deal of patience in helping me to achieve the many skills needed for diving safely in various situations. I thank Ashok for teaching me well and credit Ashok for my passing the road test.I have now purchased a car and have been driving about 4 months and with the driving skills that I have developed, feel confident and safe.I would like to thank Ashok & THE CANADIAN DRIVING ACADEMY- Waterloo. ",
  "Hi, I would just like to thank CDA and my instructor Ricky for being an amazing teacher. He made me feel comfortable while driving and helped me pass my G2 road test on the first try! I would definitely recommend this school and Ricky for driving instructor. Thanks to Ricky. <br /><br />Shelly Ahad ",
  "Dear Ricky Sharma, <br /><br />Thank you so much for the great driving course I attend in your Canadian Driving Academy inc. 285 Weber St. North. The information I gained are highly valuable and the driving course was really supporting and helpful. I also appreciated the time you spent to explain the important concepts before my road test.Now, and after I bought my car I always keep in mind your advices during the course and how I could maintain safety driving on road.I wish you all the best and for your academy all the success and I will definitely recommended more people to participate in your driving program. <br /><br />Regards Asmaa ",
  "When I came to CDA I was preparing myself to endure the trials of impatient instructors and useless classes that all other drive schools are infamous for. Needless to say I have been delightfully surprised to find myself in informative and enjoyable classes and excellent in-car sessions. If you want to learn how to really drive, not how to drive theoretically, CDA and Ashok are your best opportunity. Ashok has been the most patient, professional and personable instructor I have ever met in any field and has built my confidence through practice, common sense and simple yet effective instructions. I feel that instead of only getting a discount on insurance, I have learned to become a responsible, safe and confident driver who is prepared to drive in the real world. <br /><br />Highly recommend to ALL drivers! <br /><br />Thank you Ashok and CDA ",
  "Hi,this is Bincy.I went to this driving school and the experience which I got was super great especially the lessons taught by ashok sharma ,which was like a piece of cake. I was pretty excited to get my driving licence which I thought it would be impossible ! In the beginning I went to some other driving school but I couldn't make out, later I decided to join this driving school and here they made me to pratise everything that I need to pass my driving test as a beginner. Thank you. ",
  "I will be forever grateful for being introduced to the Canadian Driving Academy and my driving instructor Ashok. I never thought driving was possible for me. I already been to two other driving schools and I still didn't have the confidence to drive on my own. I found the instructors at other schools to be highly impatient and lacking the knowledge and personality skills to deal with an inexperienced mature driver. I never even left practicing at a local parking lot at the last school and they were supposedly the best school in Canada. I gave up and resorted to the life of travelling by bus. Then seven years later, a friend told me about Ashok. She said he was the most patient person she had ever met and she was right. After taking the informative in-class driving lessons, I went on the road with Ashok the very first day. He quickly worked on removing my driving fears, reassured me that I am a strong driver, and personalized my lessons to only work on the areas where I needed improvement. And it worked. I am now a highly skilled confident driver. I would say it's a miracle but I know it's because of Ashok and CDA. Thank you!\"",
  "I just want to thank CDA so much for teaching me how to drive. I went from no experience driving to passing my first time! My instructor, Ricky, was so helpful, and made the in car lessons comfortable and very informative. They did such a good job in increasing my confidence on the roads. The instructors are professional, and they really know what they're doing. I would recommend this driving school to anyone! Thanks to Ricky. <br /><br />Emily Feng ",
  "The Canadian Driving Academy and my driving instructor Ricky were beyond amazing. The instructor I had was calm and very thorough when teaching in car lessons. I had never drove before and the Canadian Driving Academy helped me pass on my first time! I am so happy with the experience I had. I highly recmond to all new drivers. Thanks C.D.A & Ricky <br /><br />Madeline Galea ",
  "Hi Ricky, <br /><br />I had the experience of passing the course and training at CDA Driving School, and I found very talented and professional teachers there.My driving instructor Ricky was so good. I learned specific techniques, that besides the theories part, helped a lot to get the exam passed the first time. 10 hours practicing plus the previous classes were very effective and enough to improve all kinds of movements with the car.All thanks to Ricky <br /><br />Regards, Claudia ",
  "Hey Ricky, <br /><br />William took his G2 test to day HE PASSED... WHO HOOO.. I thank you guys very much for providing awesome in class and in car driving has been the best for teaching both my boys behind the wheel. I am very pleased and i would certainly recommend Canadian Driving Academy to anyone. ",
  "I got my G2 in first attempt. I took in-class with CDA driving Instructor and it was amazing, where it helped me to gain more information about Canadian driving and road rules. I took in-car lesson with Ricky.He is the best Instructor, it was perfect; very good in teaching in a polite and friendly manner. Thanks to Canadian Driving Academy and special thanks to Ricky. <br /><br />Regards-- Manoj Kumar ",
  "Canadian Driving Academy is definitely your right choice. As a new comer to this region, the very first thing is to get your G2 license. I feel so lucky to choose Canadian Driving Academy to begin my driving experience. Compared with other driving schools, Canadian Driving Academy offers competitive price for the driving course package. The in-class teaching is very detail oriented and safety-focused which can significantly improve your knowledge of the road safety in Canada. For the in-car training, i feel so lucky to get the coach like Ricky as my driving Instructor . He is a very nice, easygoing guy with rich driving and teaching experience. He knows all the details and driving tips you need to know. Meanwhile, driving with Ricky you will feel very relaxed while concentrated. Most importantly, all the driving skills which are highly emphasized by Ricky during my training is asked by the examiner during my road test. I still remember i was so excited when i passed the road test for the first time. He is really a great coach who knows all the content of the test based on his so many years of teaching experience. In summary, i strongly recommend Canadian Driving Academy and Ricky as a driving instructor to all of you who intend to pursue your driving license while struggling in choosing the driving school. <br /><br />Patrick (Sheng) Gao <br />",
  "\"Really enjoyed my time here with CDA driving Instructor. They explain everything with alot of detail, very hard to get confused but very easy to gain great success. Thanks to them i have my license without any mistakes or accidents, Thank you Canadian Driving Academy.\" <br /><br />- Yusuf_noorah <br />",
  "\"Practically a perfect test because of an excellent instructor. I am really glad that I made the decision to call CDA driving Instructor from the Canadian Driving Academy. With his judgement, he will know when you are ready and makes sure that you have all the necessary requirements needed to pass anything! He also gives invaluable on-the-road advice even if it isn`t the exam. He wants you to be a safe driver before, during and after your tests! I definitely recommend Canadian Driving Academy!\" <br /><br />- Juliana ",
  "\"Great school! Great teachers! and Great service! I absolutely recommend Canadian Driving Academy to everyone, I keep telling my friends about how efficient all the instructors and teachers of CDA are! they have got amazing skills with how to connect with each student in order to teach them what is required and help each and every student out to be knowledgeable with all of the road safety and to learn techniques of driving, for me Canadian Driving Academy was something very important for me and my future! along with the great package price, and helping my insurance cost, i am now capable of driving safe and right! :D Thank you CDA driving Instructor for being an instructor who not only taught me how to drive but actually wanted me to learn, gain knowledge and patiently helped me through every lesson to succeed!\" <br /><br />- Emily H ",
  "\"Canadian Driving Academy is an amazing driving school where the teachers are friendly, qualified and excellent instructors. Why settle for less when you can have the best! I recommend this school to all those out there who are looking to get their drivers license!\" <br /><br />- Anu ",
  "\"I recently just passed my G2 test after taking in class and in car lessons from Canadian Driving Academy! Canadian Driving Academy not only helped me learn how to drive, it also made me confidant and comfortable with driving! The instructors at the school are very helpful! As they not only teach their students they also make sure that each and every student understands all aspects of the material! I enjoyed my in car lessons with CDA driving Instructor ecause he was very patient and calm while teaching me how to drive. I definitely recommend Canadian Driving Academy to everyone that wants to get further drivers education! It is a great school with great Instructors and a great atmosphere!\" <br /><br />- Calvin M ",
  "\"If you want to pass your road tests with no problem Canadian Driving Academy is the best school. CDA driving Instructor is great instructor and a wonderful person. I hated driving and I kept saying it to him at every lesson. He said he will make me like it and he kept his promise. If you are looking for professional people with great teaching skills you are coming to the right place. You won`t be disappointed with the quality of the lessons that you will get here and the instructor will make sure you will skill are perfect at the moment of the exam. Driving safely and with confidence is important. You can get all this at the Canadian Driving Academy.\" <br /><br />- Aliana ",
  "\"GREAT SCHOOL. I got my G in the first time. The instructors are patient and knowledgable. At first, I took my in-car lesson with the other instructor, but he kept yelling at me throughout my in-car leson. It makes me become so scare to drive again, but getting a driving license is a need for my job. My friend recommeded CDA driving Instructor to me. My first in-car with him was great, but CDA driving Instructor soothes me a lot with his patient, Now, I am pround to be say I am a good driver. Thanks to CDA driving Instructor. I would highly recommed CDA to everyone to take lessons. Not only for reducing cost of insurance, but also it is truly worthy. Driving safe and getting sufficient knowledge are important. CDA can give you all.\" <br /><br />- Karen ",
  "\"Overall i thought my lessons at this driving school was very educational and to date. In my own opinion i think the lessons are very organized and very well thought out to keep the classroom more lively then other schools. The in cars were very strict and class room teachers were very poliet and when you had a mistake they would make sure you would understand it before moving on. in conclusion i find this a very good improving school and recommend it to all.\" <br /><br />- Joseph ",
  "\"Canadian Driving Academy has impeccable and excellent service, as well as great in class instructors and in car instructors who really made me confidant and comfortable about driving, being safe, and more knowledgeable about the road! I can say that Canadian Driving Academy really has a positive atmosphere along with instructors that create a fun learning experience! I would definitely recommend people to go with Canadian Driving Academy for any driver\u2019s education!\" <br /><br />- Jessie M ",
  "Having come with 0% experience, Canadian Driving Academy has turned me into a safe and great driver. The in-class lessons were entertaining with the use of Power Point presentations, videos, and real-life examples. <br /><br />CDA driving Instructor, carefully instructed me from my first lesson in a parking lot, until I was available to drive all over the city. Throughout my training, I made many mistakes that were spot-on corrected and clarified, allowing me to build confidence and increase my experience on the road. My in-car lessons were the only practice I got and I successfully obtained my G2 License, proving that even without any experience CDA will without a doubt turn you into a great driver! <br /><br />It was a very enjoyable time, <br /><br />Thank You CDA! <br /><br />Gaymer Barrio ",
  "I had lessons to prepare for my G test in summer 2017 with CDA Driving school instructor Sanjeev. The lessons were really good. I was a nervous driver and had little experience, and Sanjeev made me a comfortable and safe driver. He gets you familiar with the test area and tells you what to expect so that the test feels easy. He focuses on what he knows is important to the test. He's a nice and relaxed guy, which really helped when I felt nervous. <br /><br />Thanks CDA! <br /><br />Laura "]

module.exports = function (app, urlencodedParser, nodemailer) {
  // acquire schema
  var { Testimonial } = require('../models/testimonials');
  // English pages
  app.get('/eng', (req, res) => {
    res.render('english/home');
  });

  app.get('/eng/about-us', (req, res) => {
    res.render('english/about');
  });

  app.get('/eng/services', (req, res) => {
    res.render('english/services');
  });

  app.get('/eng/schedule', (req, res) => {
    res.render('english/schedule');
  });

  app.get('/eng/registration', (req, res) => {
    res.render('english/registration');
  });

  app.post('/eng/formProcess', urlencodedParser, (req, res) => {
    var firstName = req.body.firstName;
    var lastName = req.body.lastName;
    var number = req.body.number;
    var email = req.body.email;
    var course = req.body.course;
    var date = req.body.date;
    var refer = req.body.find;

    //bases transport for mailer object
    let transporter = nodemailer.createTransport({
      service: "Gmail",
      secure: false,
      port: 25,
      auth: {
        user: "cdaregister@gmail.com",
        pass: "416419416"
      },
      tls: {
        rejectUnauthorized: false
      }
    });

    //extra settings for email
    let HelperOptions = {
      from: '"CDA Registration" <cdaregister@gmail.com>',
      to: 'canadiandrivingacademy@gmail.com',
      subject: 'Student Registration',
      text: 'Name: ' + firstName + ' ' + lastName + '\n\nNumber: ' + number + '\n\nEmail: ' + email
        + '\n\nRequested Course: ' + course + '\n\nPreferred Date: ' + date + '\n\nHow Did you find us: ' + refer
    };

    //send mail here
    transporter.sendMail(HelperOptions, (error, info) => {
      console.log('SENDING MAIL');
      console.log(error);
      if (!error) {
        res.redirect('/eng/completed');
        res.status(200).send();
      }
      // res.status(400).send();
    });
  });

  app.get('/eng/completed', (req, res) => {
    res.render('english/completed');
  });

  app.get('/eng/testimonials', (req, res) => {
    count = commentMap.length;
    res.render('english/testimonials', {
      commentMap,
      count
    });
  });


  app.get('/eng/questions', (req, res) => {
    res.render('english/qna');
  });

  // to retrieve all comments (disabled for now)
  // app.get('/eng/comments', (req, res)=>{
  //   Comment.find().then((students)=>{
  //     res.send({students})
  //   }).catch((e)=>{
  //     res.status(400).send();
  //   });
  // });


  app.get('/eng/contact-us', (req, res) => {
    res.render('english/contact');
  });

}
